title: svn代码合并
date: 2016-01-29 17:05:05
category: 问题记录
tags: [android,svn,代码合并]
---
&emsp;&emsp;svn是常用的集中式代码管理工具。项目中经常会遇到并行开发的情况，比如在分支上修改bug，以保证主干上代码暂时可用。因此，打分支以及合并代码是比较常见的。下面对打分支以及代码合并的操作记录一下。
### 打分支
&emsp;&emsp;打开svn项目主干副本，右键点击branch/tag...，其中branch是分支，tag是标签（区别？）
![1](/image/svn代码合并/1.png)
![2](/image/svn代码合并/2.png)
&emsp;&emsp;然后选择需要创建的branch的路径。其中可以选择当前版本，也可以选择一个特殊的版本，也可以选择working copy
* 当前版本：
	即从当前的版本库中以最新版本创建分支
* 指定版本：
	即从当前的版本库中的以某个版本创建分支
* working copy：
    即从当前的本地工作副本来创建分支（非版本库），svn会依据本地工作副本的改动情况来决定需不要向版本库中传输数据。
	
&emsp;&emsp;一般情况下，在创建分支前需要更新本地代码，然后提交本地代码，在保证本地代码为版本库最新版本的情况下，直接选择当前版本打出分支。
&emsp;&emsp;其中在最底部有个*switch working copy to new branck/tag*选项，选中表示当前的工作副本会切换到新的分支或者tag。一般不勾选，自己手动切换。然后点击确定，在分支路径下，更新一下版本库，创建分支完成。
### 代码合并
&emsp;&emsp;代码合并有两种，一种是从分支合并到主干，一种是从主干合并到分支。从分支合并到主干选择主干的目录，从主干合并到分支选择分支的目录。分支合到主干的情况是比较多的。在主干的工作目录下点击merge，会有三个选项：
![3](/image/svn代码合并/3.png)
* 合并一个范围的版本
	即把分支上的一个版本合并到主干上面。路径选择分支的路径，如果不填版本则代表分支上所有的改动都将合并到分支上。如果填了特定版本则代表把分支上特定版本的改动合并到主干。
* 复兴分支
	复兴分支一般用于在打出分支以后主干代码并没有改动的情况，复兴分支不能选择分支版本。合并之后分支所有改动都将合并到主干，并且分支和主干是一样的，以便可以直接删除分支。
* 合并两个不同的树
	这种情况和上面两种都有差别。可以选择主干的起始版本，也可以选择分支的结束版本。from选择开始的目录以及版本。to选择结束的目录以及版本。如果要把分支所有改动代码合并到主干，则选择form为打分支的版本，to为分支的最新版本。
	![6](/image/svn代码合并/6.png)
	
&emsp;&emsp;目前只有这些情况，遇到问题在继续添加。